<div
  class="sidebar bg-gradient-to-t from-green-100 via-white to-gray-50 shadow-lg fixed top-0 left-0 h-screen overflow-y-auto transition-all duration-300 flex flex-col"
  [class.w-64]="!collapsed" [class.w-20]="collapsed"
>
  <!-- Profile Section -->
  <div class="profile-section flex flex-col items-center py-8 mt-16 border-b border-gray-300">
    <div
      *ngIf="profilePicture; else initialsBlock"
      class="profile-picture w-16 h-16 rounded-full border-4 border-green-500 mb-4"
      [style.backgroundImage]="'url(' + profilePicture + ')'"
      [style.backgroundSize]="'cover'"
    ></div>
    <ng-template #initialsBlock>
      <div
        class="w-16 h-16 flex items-center justify-center rounded-full text-white font-bold"
        [style.backgroundColor]="generatePastelColor()"
      >
        {{ getInitials(profileName) }}
      </div>
    </ng-template>
    <div
      class="profile-details text-center transition-all duration-300"
      [class.opacity-0]="collapsed" [class.opacity-100]="!collapsed"
    >
      <span class="name text-lg font-semibold text-gray-800 block">{{ profileName }}</span>
      <span class="role text-sm text-gray-600 block mt-1">Cardiologist</span>
    </div>
  </div>

  <!-- Navigation Links -->
  <nav class="flex-grow mt-6 px-2">
    <ul class="space-y-3">
      <!-- Dashboard -->
      <li>
        <a
          routerLink="/doctor/dashboard"
          routerLinkActive="bg-green-100 text-green-600"
          class="flex items-center gap-4 px-4 py-3 rounded-md text-gray-700 hover:bg-green-50 transition-all relative group"
        >
          <i class="bi bi-speedometer2 text-xl"></i>
          <span
            class="transition-all duration-300"
            [class.opacity-0]="collapsed" [class.opacity-100]="!collapsed"
          >
            Dashboard
          </span>
          <span
            *ngIf="collapsed"
            class="absolute left-20 bg-gray-700 text-white text-xs font-semibold rounded-lg px-3 py-1 opacity-0 group-hover:opacity-100 transition-opacity duration-300 z-10"
          >
            Dashboard
          </span>
        </a>
      </li>

      <!-- Appointments -->
      <li>
        <a
          routerLink="/doctor/appointments"
          routerLinkActive="bg-green-100 text-green-600"
          class="flex items-center gap-4 px-4 py-3 rounded-md text-gray-700 hover:bg-green-50 transition-all relative group"
        >
          <i class="bi bi-calendar-check text-xl"></i>
          <span
            class="transition-all duration-300"
            [class.opacity-0]="collapsed" [class.opacity-100]="!collapsed"
          >
            Appointments
          </span>
          <span
            *ngIf="collapsed"
            class="absolute left-20 bg-gray-700 text-white text-xs font-semibold rounded-lg px-3 py-1 opacity-0 group-hover:opacity-100 transition-opacity duration-300 z-10"
          >
            Appointments
          </span>
        </a>
      </li>

      <!-- Doctors -->
      <li>
        <a
          routerLink="/doctor/doctors"
          routerLinkActive="bg-green-100 text-green-600"
          class="flex items-center gap-4 px-4 py-3 rounded-md text-gray-700 hover:bg-green-50 transition-all relative group"
        >
          <i class="bi bi-person text-xl"></i>
          <span
            class="transition-all duration-300"
            [class.opacity-0]="collapsed" [class.opacity-100]="!collapsed"
          >
            Doctors
          </span>
          <span
            *ngIf="collapsed"
            class="absolute left-20 bg-gray-700 text-white text-xs font-semibold rounded-lg px-3 py-1 opacity-0 group-hover:opacity-100 transition-opacity duration-300 z-10"
          >
            Doctors
          </span>
        </a>
      </li>

      <!-- Patients -->
      <li>
        <a
          routerLink="/doctor/patients"
          routerLinkActive="bg-green-100 text-green-600"
          class="flex items-center gap-4 px-4 py-3 rounded-md text-gray-700 hover:bg-green-50 transition-all relative group"
        >
          <i class="bi bi-people text-xl"></i>
          <span
            class="transition-all duration-300"
            [class.opacity-0]="collapsed" [class.opacity-100]="!collapsed"
          >
            Patients
          </span>
          <span
            *ngIf="collapsed"
            class="absolute left-20 bg-gray-700 text-white text-xs font-semibold rounded-lg px-3 py-1 opacity-0 group-hover:opacity-100 transition-opacity duration-300 z-10"
          >
            Patients
          </span>
        </a>
      </li>

      <!-- Payments -->
      <li>
        <a
          routerLink="/doctor/payments"
          routerLinkActive="bg-green-100 text-green-600"
          class="flex items-center gap-4 px-4 py-3 rounded-md text-gray-700 hover:bg-green-50 transition-all relative group"
        >
          <i class="bi bi-credit-card text-xl"></i>
          <span
            class="transition-all duration-300"
            [class.opacity-0]="collapsed" [class.opacity-100]="!collapsed"
          >
            Payments
          </span>
          <span
            *ngIf="collapsed"
            class="absolute left-20 bg-gray-700 text-white text-xs font-semibold rounded-lg px-3 py-1 opacity-0 group-hover:opacity-100 transition-opacity duration-300 z-10"
          >
            Payments
          </span>
        </a>
      </li>

      <!-- Settings -->
      <li>
        <a
          routerLink="/doctor/settings"
          routerLinkActive="bg-green-100 text-green-600"
          class="flex items-center gap-4 px-4 py-3 rounded-md text-gray-700 hover:bg-green-50 transition-all relative group"
        >
          <i class="bi bi-gear text-xl"></i>
          <span
            class="transition-all duration-300"
            [class.opacity-0]="collapsed" [class.opacity-100]="!collapsed"
          >
            Settings
          </span>
          <span
            *ngIf="collapsed"
            class="absolute left-20 bg-gray-700 text-white text-xs font-semibold rounded-lg px-3 py-1 opacity-0 group-hover:opacity-100 transition-opacity duration-300 z-10"
          >
            Settings
          </span>
        </a>
      </li>

      <!-- Others Section -->
      <li>
        <div
          class="text-gray-500 text-sm font-semibold uppercase tracking-wide mt-6 px-4"
          [class.opacity-0]="collapsed" [class.opacity-100]="!collapsed"
        >
          Others
        </div>
      </li>

      <!-- Calendar -->
      <li>
        <a
          routerLink="/doctor/calendar"
          routerLinkActive="bg-green-100 text-green-600"
          class="flex items-center gap-4 px-4 py-3 rounded-md text-gray-700 hover:bg-green-50 transition-all relative group"
        >
          <i class="bi bi-calendar-event text-xl"></i>
          <span
            class="transition-all duration-300"
            [class.opacity-0]="collapsed" [class.opacity-100]="!collapsed"
          >
            Calendar
          </span>
          <span
            *ngIf="collapsed"
            class="absolute left-20 bg-gray-700 text-white text-xs font-semibold rounded-lg px-3 py-1 opacity-0 group-hover:opacity-100 transition-opacity duration-300 z-10"
          >
            Calendar
          </span>
        </a>
      </li>

      <!-- To-Do List -->
      <li>
        <a
          routerLink="/doctor/todo-list"
          routerLinkActive="bg-green-100 text-green-600"
          class="flex items-center gap-4 px-4 py-3 rounded-md text-gray-700 hover:bg-green-50 transition-all relative group"
        >
          <i class="bi bi-card-checklist text-xl"></i>
          <span
            class="transition-all duration-300"
            [class.opacity-0]="collapsed" [class.opacity-100]="!collapsed"
          >
            To-Do List
          </span>
          <span
            *ngIf="collapsed"
            class="absolute left-20 bg-gray-700 text-white text-xs font-semibold rounded-lg px-3 py-1 opacity-0 group-hover:opacity-100 transition-opacity duration-300 z-10"
          >
            To-Do List
          </span>
        </a>
      </li>

      <!-- Chat -->
      <li>
        <a
          routerLink="/doctor/chat"
          routerLinkActive="bg-green-100 text-green-600"
          class="flex items-center gap-4 px-4 py-3 rounded-md text-gray-700 hover:bg-green-50 transition-all relative group"
        >
          <i class="bi bi-chat-dots text-xl"></i>
          <span
            class="transition-all duration-300"
            [class.opacity-0]="collapsed" [class.opacity-100]="!collapsed"
          >
            Chat
          </span>
          <span
            *ngIf="collapsed"
            class="absolute left-20 bg-gray-700 text-white text-xs font-semibold rounded-lg px-3 py-1 opacity-0 group-hover:opacity-100 transition-opacity duration-300 z-10"
          >
            Chat
          </span>
        </a>
      </li>
    </ul>
  </nav>

  <!-- Toggle Button (Connected with the Layout.Component Now) -->
  <button
    class="toggle-btn mx-auto mb-6 w-12 h-12 bg-green-500 text-white rounded-full flex items-center justify-center shadow-lg hover:bg-green-600 hover:scale-110 transition-transform duration-300"
    (click)="onToggle()"
  >
    <i [class]="collapsed ? 'bi bi-chevron-double-right' : 'bi bi-chevron-double-left'"></i>
  </button>
</div>
