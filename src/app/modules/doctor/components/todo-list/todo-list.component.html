<div class="bg-white rounded-lg shadow-lg p-6">
  <!-- Header with Task Stats -->
  <div class="flex justify-between items-center mb-4">
    <h3 class="text-lg font-semibold">Tasks</h3>
    <span class="text-gray-600 text-sm">
      {{ completedCount }} / {{ todos.length }} Completed
    </span>
  </div>

  <!-- Task Entry -->
  <div class="flex items-center gap-2 mb-4">
    <span
      class="w-5 h-5 border-2 border-gray-300 rounded-full flex-shrink-0 cursor-pointer"
    ></span>
    <input
      [(ngModel)]="newTodo.task"
      (keydown.enter)="addTodo()"
      placeholder="Add a new task..."
      class="flex-grow px-4 py-2 border-b border-gray-300 focus:outline-none focus:border-green-500"
      required
    />
    <select
      [(ngModel)]="newTodo.priority"
      name="newTodoPriority"
      class="px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
    >
      <option value="High">High</option>
      <option value="Medium">Medium</option>
      <option value="Low">Low</option>
    </select>
    <input
      type="date"
      [(ngModel)]="newTodo.dueDate"
      class="px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
    />
  </div>

  <!-- Todo List -->
  <ul class="space-y-2 max-h-40 overflow-auto">
    <li
      *ngFor="let todo of todos"
      class="flex justify-between items-center p-2 border-b border-gray-200"
    >
      <!-- Left Section: Completion and Task Info -->
      <div class="flex items-center gap-2">
        <span
          (click)="toggleComplete(todo)"
          class="w-5 h-5 border-2 rounded-full flex-shrink-0 cursor-pointer"
          [ngClass]="{
            'bg-green-500 border-green-500': todo.completed,
            'border-gray-300': !todo.completed
          }"
        ></span>
        <div>
          <span
            [class.line-through]="todo.completed"
            [class.text-gray-400]="todo.completed"
            class="text-sm"
          >
            {{ todo.task }}
          </span>
          <span
            class="ml-2 text-xs text-gray-500"
            *ngIf="todo.dueDate"
          >
            (Due: {{ todo.dueDate | date: 'shortDate' }})
          </span>
        </div>
      </div>

      <!-- Right Section: Priority, Edit & Delete -->
      <div class="flex items-center gap-2">
        <!-- Priority Indicator -->
        <select
          [(ngModel)]="todo.priority"
          class="text-xs bg-transparent border-none text-gray-500"
          [ngClass]="{
            'text-red-500': todo.priority === 'High',
            'text-yellow-500': todo.priority === 'Medium',
            'text-green-500': todo.priority === 'Low'
          }"
        >
          <option value="High">High</option>
          <option value="Medium">Medium</option>
          <option value="Low">Low</option>
        </select>
        <!-- Delete Button -->
        <button
          (click)="deleteTodo(todo)"
          class="text-xs px-2 py-1 rounded bg-red-500 text-white hover:bg-red-600"
        >
          Delete
        </button>
      </div>
    </li>
  </ul>
</div>
